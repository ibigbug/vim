NPMRC=$HOME/.npmrc

export http_proxy=http://proxy.tencent.com:8080
export https_proxy=https://proxy.tencent.com:8080
export GIT_SSH=/usr/local/bin/proxyssh
export GIT_PROXY_COMMAND=/usr/local/bin/proxywrapper
cat >> $NPMRC <<EOF
proxy = http://proxy.tencent.com:8080
https_proxy = https://proxy.tencent.com:8080
registry = http://registry.npmjs.org
EOF

_OLD_PS1=$PS1
PS1="(proxy_env)$PS1"
export PS1
deactivate(){
    unset http_proxy
    unset https_proxy
    unset GIT_SSH
    echo 'registry = http://registry.npmjs.org' > $NPMRC

    if [ -n "$_OLD_PS1" ]; then
        PS1="$_OLD_PS1"
        export PS1
        unset _OLD_PS1
    fi
    unset -f deactivate
}
